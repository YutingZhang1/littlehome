<view class="custom-navbar">
  <view class="back-btn" bindtap="goBack">
    <image src="https://dis-1301530190.cos.ap-nanjing.myqcloud.com/LittlehomePic/back.png" mode="aspectFit"></image>
  </view>
  <text class="navbar-title">LittleHome</text>
</view>

<view class="notes-container">
  <!-- 新增日记按钮 -->
  <view class="add-note" bindtap="showNoteInput">
    <text class="add-icon">+</text>
    <text>写点什么...</text>
  </view>

  <!-- 日记列表 -->
  <scroll-view 
    class="notes-list" 
    scroll-y 
    enable-flex
    enhanced
    show-scrollbar="{{false}}"
  >
    <view class="list-tip">长按日记可编辑或删除</view>
    <view class="note-item" 
      wx:for="{{notes}}" 
      wx:key="id"
      data-id="{{item.id}}"
      bindlongpress="showNoteOptions"
    >
      <view class="note-content">{{item.content}}</view>
      <view class="note-meta">
        <text class="note-time">{{item.displayDate}}</text>
      </view>
    </view>
    <view wx:if="{{loading}}" class="loading-text">加载中...</view>
  </scroll-view>
</view>

<!-- 新增/编辑日记弹窗 -->
<view class="note-modal {{showNoteInput ? 'show' : ''}}">
  <view class="modal-mask" bindtap="hideNoteInput"></view>
  <view class="modal-content">
    <textarea 
      class="note-textarea" 
      placeholder="写下你的想法..." 
      value="{{currentNote}}"
      bindinput="onNoteInput"
      auto-focus
      maxlength="500"
      show-confirm-bar="{{false}}"
    ></textarea>
    <view class="pretty-btn-row">
      <button class="pretty-cancel-btn" bindtap="hideNoteInput">取消</button>
      <button class="pretty-gradient-btn" bindtap="saveNote">保存</button>
    </view>
  </view>
</view> 